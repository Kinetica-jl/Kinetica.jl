<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Saving &amp; Loading · Kinetica.jl</title><meta name="title" content="Saving &amp; Loading · Kinetica.jl"/><meta property="og:title" content="Saving &amp; Loading · Kinetica.jl"/><meta property="twitter:title" content="Saving &amp; Loading · Kinetica.jl"/><meta name="description" content="Documentation for the Kinetica.jl package and its modular kinetic calculators."/><meta property="og:description" content="Documentation for the Kinetica.jl package and its modular kinetic calculators."/><meta property="twitter:description" content="Documentation for the Kinetica.jl package and its modular kinetic calculators."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Kinetica.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Kinetica.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting-started/">Getting Started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../arbitrary-conditions/">Arbitrary Simulation Conditions</a></li><li><a class="tocitem" href="../ode-solution/">ODE Solution</a></li><li><a class="tocitem" href="../kinetic-calculators/">Kinetic Calculators</a></li><li><a class="tocitem" href="../iterative-exploration/">Iterative CRN Exploration</a></li><li><a class="tocitem" href="../results-analysis/">Results Analysis</a></li><li><a class="tocitem" href="../filtering-crns/">Filtering CRNs</a></li><li class="is-active"><a class="tocitem" href>Saving &amp; Loading</a><ul class="internal"><li><a class="tocitem" href="#Saving"><span>Saving</span></a></li><li><a class="tocitem" href="#Loading"><span>Loading</span></a></li></ul></li><li><a class="tocitem" href="../logging/">Logging</a></li></ul></li><li><span class="tocitem">Developing with Kinetica</span><ul><li><a class="tocitem" href="../../development/crn-representation/">CRN Representation</a></li><li><a class="tocitem" href="../../development/condition-profiles/">Condition Profiles</a></li><li><a class="tocitem" href="../../development/calculator-interface/">Calculator Interface</a></li><li><a class="tocitem" href="../../development/implementation-details/">Implementation Details</a></li></ul></li><li><span class="tocitem">API</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">Kinetica.jl</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/kinetica/exploration/">Exploration</a></li><li><a class="tocitem" href="../../api/kinetica/solving/">Solving</a></li><li><a class="tocitem" href="../../api/kinetica/conditions/">Conditions</a></li><li><a class="tocitem" href="../../api/kinetica/analysis/">Analysis</a></li><li><a class="tocitem" href="../../api/kinetica/openbabel/">Open Babel</a></li><li><a class="tocitem" href="../../api/kinetica/rdkit/">RDKit</a></li><li><a class="tocitem" href="../../api/kinetica/utilities/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../api/kineticakpm/">KineticaKPM.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Saving &amp; Loading</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Saving &amp; Loading</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Kinetica-jl/Kinetica.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Kinetica-jl/Kinetica.jl/blob/main/docs/src/tutorials/saving-loading.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Saving-and-Loading"><a class="docs-heading-anchor" href="#Saving-and-Loading">Saving &amp; Loading</a><a id="Saving-and-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-and-Loading" title="Permalink"></a></h1><p>Kinetica allows for saving and loading <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a> objects (see <a href="../results-analysis/#Results-Analysis">Results Analysis</a>) in a binary JSON (BSON) format using the <a href="https://github.com/JuliaIO/BSON.jl">BSON.jl</a> package. This allows for generated CRNs and the parameters and results of kinetic simulations to be serialised and efficiently stored, while also being usable in new Julia sessions and retaining the analysis tools detailed in <a href="../results-analysis/#Results-Analysis">Results Analysis</a>.</p><h2 id="Saving"><a class="docs-heading-anchor" href="#Saving">Saving</a><a id="Saving-1"></a><a class="docs-heading-anchor-permalink" href="#Saving" title="Permalink"></a></h2><p>When performing a CRN exploration, saving is handled automatically by passing a directory to the <code>savedir</code> keyword argument of <a href="../../api/kinetica/exploration/#Kinetica.explore_network"><code>explore_network</code></a>, as was demonstrated in <a href="../../getting-started/#Getting-Started">Getting Started</a>. However, <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a>s can also be saved manually using the <a href="../../api/kinetica/analysis/#Kinetica.save_output"><code>save_output</code></a> function:</p><pre><code class="language-julia hljs"># res = solve_network(solvemethod, sd, rd)
save_output(res, &quot;/path/to/saved_output.bson&quot;)</code></pre><div class="admonition is-info"><header class="admonition-header">Save Path</header><div class="admonition-body"><p>Unlike the <code>savedir</code> argument of <a href="../../api/kinetica/exploration/#Kinetica.explore_network"><code>explore_network</code></a>, the path provided to <a href="../../api/kinetica/analysis/#Kinetica.save_output"><code>save_output</code></a> should be to a file ending in <code>.bson</code>, rather than to a directory, since only a single CRN is being saved (rather than the multiple checkpoints saved by iterative CRN explorations).</p></div></div><p>Saving simulation outputs this way destructures them into core Julia objects only - mostly <code>Vector</code>s, <code>Dict</code>s and <code>Array</code>s. This allow them to be loaded back in under any Julia environment, even those where Kinetica or DifferentialEquations.jl (which <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a>s makes heavy use of types from) are not loaded. However, this does necessitate discarding some of the internals of objects such as <a href="../../api/kinetica/conditions/#ConditionSet"><code>ConditionSet</code></a>s and DiffEq&#39;s <code>ODESolution</code>s which are not easily serialised.</p><div class="admonition is-warning"><header class="admonition-header">Unsaved Fields</header><div class="admonition-body"><p>Among the data that will be lost on saving are:</p><ul><li>Anything in <code>ODESolveOutput.sd.cache</code>, as the contents of this cache are intentionally undefined and therefore difficult to serialise correctly. This will be replaced with an empty <code>Dict</code> upon loading.</li><li>Any Julia functions within variable condition profiles, i.e. the <code>f</code> field within <code>AbstractDirectProfile</code>s and the <code>grad</code> field within <code>AbstractGradientProfile</code>s. Functions are not directly serialisable within BSON.</li><li>The exact ODE solver used within <code>ODESolveOutput.pars.solver</code>, as this is always an external type. This will be replaced with a <code>Symbol</code> representing the type of solver for reference of what was used within the attached simulation.</li><li>Any DiffEq <code>ODESolution</code>s such as <code>ODESolveOutput.sol</code> will lose their underlying ModelingToolkit representations, as only the <code>sol.u</code> and <code>sol.t</code> fields will be saved. These are reconstructed as <code>DiffEqArray</code>s when loaded back in.</li></ul><p>Note that no information about the kinetic calculator used within the simulation is saved either. Calculator implementation varies too much to be consistently serialised so it is intentionally left out of <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a>. It can be very useful to save some of the information stored within calculators and this is entirely possible with BSON.jl, but this is left to the user.</p></div></div><h2 id="Loading"><a class="docs-heading-anchor" href="#Loading">Loading</a><a id="Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Loading" title="Permalink"></a></h2><p>Saved CRN results can be loaded back in to Julia through two methods. If loaded back in using Kinetica&#39;s <a href="../../api/kinetica/analysis/#Kinetica.load_output"><code>load_output</code></a> function, the serialised BSON gets reconstructed into a new <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a>. Taking the CRN we generated and simulated in <a href="../../getting-started/#Getting-Started">Getting Started</a> as an example:</p><pre><code class="language-julia hljs">using Kinetica

res = load_output(&quot;../my_CRN_out/direct_network_final.bson&quot;);</code></pre><div class="admonition is-info"><header class="admonition-header">Suppressing Output</header><div class="admonition-body"><p>When called in an interactive session, <a href="../../api/kinetica/analysis/#Kinetica.load_output"><code>load_output</code></a> will produce a lot of output detailing the <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a> object. To suppress this, the load call can be ended with a semicolon, like above.</p></div></div><p>While every effort is made to maintain compatibility between saved outputs between Kinetica versions, we cannot guarantee that the internal structure of <a href="../../api/kinetica/analysis/#Kinetica.ODESolveOutput"><code>ODESolveOutput</code></a>s will never change. If this happens in a way that cannot be worked around when reconstructing within <a href="../../api/kinetica/analysis/#Kinetica.load_output"><code>load_output</code></a>, or if you wish to load the data in an environment without Kinetica, the output can still be loaded in as a raw BSON <code>Dict</code> tree:</p><pre><code class="language-julia hljs">using BSON
out_raw = BSON.load(&quot;../my_CRN_out/direct_network_final.bson&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, Any} with 6 entries:
  :rd                  =&gt; Dict{Symbol, Any}(:stoic_prods=&gt;Any[[1, 1], [1, 1], […
  :pars                =&gt; Dict{Symbol, Any}(:sparse=&gt;true, :maxiters=&gt;100000, :…
  :sol                 =&gt; Dict{Symbol, Any}(:k=&gt;nothing, :vcs=&gt;Dict{Symbol, Any…
  :KineticaCoreVersion =&gt; v&quot;0.5.3&quot;
  :sd                  =&gt; Dict{Symbol, Any}(:toInt=&gt;Dict(&quot;C=C&quot;=&gt;9, &quot;[H][H]&quot;=&gt;3,…
  :conditions          =&gt; Dict{Symbol, Any}(:profiles=&gt;Any[OrderedDict{Symbol, …</code></pre><p>This allows users to flexibly access generated CRNs and kinetic simulation results, even when Kinetica is unavailable.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../filtering-crns/">« Filtering CRNs</a><a class="docs-footer-nextpage" href="../logging/">Logging »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Friday 5 April 2024 14:56">Friday 5 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
